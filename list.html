<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>영상 목록 - KidsAni</title>
  <link rel="stylesheet" href="css/style.css"/>
  <style>
    body { padding-top: 52px; }
    main { max-width: 1100px; margin: 0 auto; padding: 16px; }

    /* --- 툴바 --- */
    .toolbar {
      background: var(--bg-2);
      padding: 12px;
      border-radius: 12px;
      margin-bottom: 16px;
      border: 1px solid var(--border);
    }
    .controls-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 12px;
      align-items: center;
    }
    .control-group { display: flex; flex-direction: column; gap: 4px; }
    .control-group label { font-size: 12px; color: var(--muted); padding-left: 4px; }
    .control-group select, .control-group input, .control-group .btn {
      width: 100%;
      height: 38px;
      padding: 0 12px;
      border-radius: 8px;
      border: 1px solid var(--border);
      background: var(--bg-3);
      color: var(--fg);
    }
    .btn-group { display: flex; gap: 8px; }
    .btn { cursor: pointer; display: inline-flex; align-items: center; justify-content: center; }
    .btn:hover { background: #333; }

    /* --- 일괄 작업 바 --- */
    .bulk-actions {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 8px 0;
    }
    .bulk-actions .btn:disabled { opacity: 0.5; cursor: not-allowed; }

    /* --- 카드 리스트 --- */
    .item-list { display: flex; flex-direction: column; gap: 10px; }
    .item {
        display: grid;
        grid-template-columns: auto 1fr auto; /* 체크박스, 메인, 사이드 */
        gap: 12px;
        align-items: center;
        padding: 12px;
        background: var(--bg-2);
        border: 1px solid var(--border);
        border-radius: 12px;
        cursor: pointer;
    }
    .item:hover { background-color: var(--bg-3); }
    .col-check { padding-top: 2px; }
    .col-main { display: flex; flex-direction: column; gap: 6px; overflow: hidden; }
    .title { font-weight: 600; white-space: nowrap; text-overflow: ellipsis; overflow: hidden; }
    .url { font-size: 12px; color: var(--muted); white-space: nowrap; text-overflow: ellipsis; overflow: hidden; }
    .chips { display: flex; flex-wrap: wrap; gap: 6px; }
    .chip { background: #333; padding: 3px 8px; border-radius: 6px; font-size: 12px; }
    .meta { font-size: 11px; color: var(--muted); display: flex; align-items: center; gap: 8px; flex-wrap: wrap; }
    .series-badge { background: #4a4; color: #fff; padding: 2px 6px; border-radius: 4px; }
    .episode-badge { background: #44a; color: #fff; padding: 2px 6px; border-radius: 4px; }
    .col-side { text-align: right; }
    .thumb { width: 120px; height: 90px; object-fit: cover; border-radius: 8px; background-color: #222; }

    /* --- 상태 메시지 --- */
    #empty, #errorBanner { padding: 20px; text-align: center; color: var(--muted); display: none; }
    #errorBanner a { color: var(--accent); }
    #sentinel { height: 50px; }
  </style>
</head>
<body>
  <header id="topbar">
      </header>

  <main>
    <div class="toolbar">
      <div class="controls-grid">
        <div class="control-group">
          <label for="catSelect">카테고리</label>
          <select id="catSelect">
            <option value="">-- 전체 --</option>
          </select>
        </div>
        <div class="control-group">
          <label for="keyword">검색</label>
          <input type="search" id="keyword" placeholder="제목, URL로 검색...">
        </div>
        <div class="control-group">
          <label>정렬</label>
          <div class="btn-group">
            <select id="sortSelect" class="btn">
              <option value="createdAt_desc">최신순</option>
              <option value="createdAt_asc">오래된순</option>
              <option value="title_asc">가나다순</option>
              <option value="title_desc">가나다 역순</option>
              <option value="seriesSortAt_desc">시리즈 최신</option>
              <option value="seriesSortAt_asc">시리즈 오래된순</option>
            </select>
            <button id="refreshBtn" class="btn">새로고침</button>
          </div>
        </div>
      </div>
    </div>

    <div class="bulk-actions">
      <span id="selCount">선택 0</span>
      <button id="bulkChangeBtn" class="btn" disabled>카테고리 변경</button>
      <button id="bulkDeleteBtn" class="btn" disabled>삭제</button>
    </div>

    <div id="errorBanner" role="alert"></div>
    <div id="list" class="item-list"></div>
    <div id="empty" style="display: none;">결과가 없습니다.</div>
    <div id="sentinel"></div> </main>

  <dialog id="catDialog">
    <form method="dialog">
      <h4>카테고리 변경</h4>
      <div id="catDialogBody"></div>
      <footer>
        <button type="button" id="catSaveBtn">저장</button>
        <button type="submit" value="cancel">취소</button>
      </footer>
    </form>
  </dialog>

  <script type="module" src="js/firebase-init.js"></script>
  <script type="module" src="js/auth.js"></script>
  <script type="module" src="js/categories.js"></script>
  <script type="module" src="js/swipe-index.js"></script>
  <script type="module" src="js/list.js"></script>
</body>
</html>
